/* Global font and small overrides (Helvetical/Helvetica as requested) */
:root {
  --bg: #0a0a0c;       /* dark off-black */
  --card: #0b1220;
  --text: #c084fc;     /* light purple for all text */
  --muted: #9aa4b2;
  --page-transition: 340ms;
  --page-ease: cubic-bezier(.2,.9,.3,1);
}

/* font-face / global font rules (existing) */
@font-face {
  font-family: "Verona-Serial-Medium";
  src: local("verona-serial-medium"), local("Verona Serial Medium"), local("VeronaSerial-Medium");
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}
html, body {
  font-family: "Verona-Serial-Medium", "Helvetica Neue", Helvetica, Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
  letter-spacing: -0.05rem; /* updated: basic text spacing */
}

/* Header title: bold + tightened spacing */
header h1 {
  font-weight: 700;
  letter-spacing: -0.15rem; /* restored to -0.15rem */
}

/* Small titles (gallery/resume) opacity handled in index.html via utility class */
/* Socials letter-spacing */
.socials li a {
  letter-spacing: -0.1rem;
  color: var(--text);
}

/* Links: inherit the purple text color; hover slightly brighter */
a {
  color: var(--text);
  text-decoration: none;
  transition: color .18s ease, transform .18s ease, opacity .18s ease;
}
a:hover, a:focus {
  color: #e9d7ff;
}

/* Project link glitch effect (keeps final 'tbd' shown after hover) */
.project-link {
  position: relative;
  display: inline-block;
  cursor: pointer;
  color: inherit;
  overflow: visible;
  font-size: 0.95rem;
  padding: 0.2rem 0.5rem;
}

/* base layers */
.project-link .orig,
.project-link .final,
.project-link .glitch::before,
.project-link .glitch::after {
  display: inline-block;
  position: relative;
  white-space: nowrap;
}

/* final result (hidden until animation end) */
.project-link .final {
  position: absolute;
  left: 0;
  top: 0;
  opacity: 0;
  pointer-events: none;
}

/* glitch pseudo layers */
.project-link .glitch {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  opacity: 0;
}
.project-link .glitch::before,
.project-link .glitch::after {
  content: attr(data-text);
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  color: inherit;
  background: transparent;
  mix-blend-mode: screen;
}

/* hover triggers animation */
.project-link:hover .glitch {
  opacity: 1;
  animation: glitch-show 1.6s linear forwards;
}
.project-link:hover .glitch::before {
  animation: glitch-top 1.6s linear forwards;
}
.project-link:hover .glitch::after {
  animation: glitch-bottom 1.6s linear forwards;
}
.project-link:hover .orig {
  animation: orig-fade 1.6s linear forwards;
}
.project-link:hover .final {
  animation: final-show 1.6s linear forwards;
}

/* keyframes */
@keyframes glitch-top {
  0% { transform: translate(0,0); clip-path: inset(0 0 80% 0); opacity:1; }
  25% { transform: translate(-6px,-4px); clip-path: inset(0 0 40% 0); }
  50% { transform: translate(6px,-2px); clip-path: inset(0 0 30% 0); }
  75% { transform: translate(-3px,2px); clip-path: inset(0 0 60% 0); opacity:.7; }
  100% { transform: translate(0); clip-path: inset(0 0 100% 0); opacity:0; }
}

@keyframes glitch-bottom {
  0% { transform: translate(0,0); clip-path: inset(60% 0 0 0); opacity:1; }
  25% { transform: translate(6px,4px); clip-path: inset(30% 0 0 0); }
  50% { transform: translate(-6px,2px); clip-path: inset(20% 0 0 0); }
  75% { transform: translate(3px,-2px); clip-path: inset(50% 0 0 0); opacity:.7; }
  100% { transform: translate(0); clip-path: inset(100% 0 0 0); opacity:0; }
}

@keyframes orig-fade {
  0% { opacity:1; transform: none; }
  85% { opacity:0.2; transform: translateY(0); }
  100% { opacity:0; transform: translateY(-2px); }
}

@keyframes final-show {
  0% { opacity:0; transform: translateY(2px); }
  85% { opacity:0; }
  100% { opacity:1; transform: translateY(0); }
}

/* ensure minimal layout stability */
.project-link .orig,
.project-link .final { display:inline-block; min-width:1ch; }

/* Back button top-left (50% white) */
.back-btn {
  position: fixed;
  top: 1rem;
  left: 1rem;
  color: #ffffff;
  opacity: 0.5;
  text-decoration: none;
  font-size: 0.95rem;
  z-index: 60;
  transition: opacity .15s ease;
}
.back-btn:hover,
.back-btn:focus {
  opacity: 0.85;
}

/* Disable old CSS-based glitch animations and ensure centered behavior */
.project-link,
.project-link * {
  animation: none !important;
  transition: none !important;
}

/* hide previous .glitch/.final layers so JS controls the text */
.project-link .glitch,
.project-link .final {
  display: none !important;
}

/* ensure the visible element is centered and stable width */
.project-link {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  cursor: default;
  user-select: none;
}

/* the element we overwrite during animation */
.project-link .orig {
  display: inline-block;
  white-space: nowrap;
  text-align: center;
  /* width will be set by JS to avoid layout shift */
  min-width: 0;
  box-sizing: content-box;
  vertical-align: middle;
}

/* project title link colours */
.project-title-link {
  text-decoration: none;
  transition: color .18s ease, opacity .12s ease;
}
.project-title-link.purple {
  color: var(--text); /* existing purple variable */
}
.project-title-link.purple:hover,
.project-title-link.purple:focus {
  color: #e9d7ff;
}
.project-title-link.white {
  color: #ffffff;
}
.project-title-link.white:hover,
.project-title-link.white:focus {
  color: #ffffffcc;
}
/* ensure number header remains non-clickable but interactive for glitch script */
.project-link { cursor: pointer; }

/* page entrance (on load) */
body.page-enter {
  opacity: 0;
  transform: translateY(6px) scale(0.999);
}
body.page-enter.page-enter-active {
  transition: opacity var(--page-transition) var(--page-ease), transform var(--page-transition) var(--page-ease);
  opacity: 1;
  transform: none;
}

/* page exit (on link click) */
body.page-exit {
  opacity: 1;
  transform: none;
}
body.page-exit.page-exit-active {
  transition: opacity var(--page-transition) var(--page-ease), transform var(--page-transition) var(--page-ease);
  opacity: 0;
  transform: translateY(-6px) scale(0.998);
}

/* reduce motion for users who prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
  body.page-enter,
  body.page-enter.page-enter-active,
  body.page-exit,
  body.page-exit.page-exit-active {
    transition: none !important;
    transform: none !important;
    opacity: 1 !important;
  }
}

/* Postcards gallery: vertical scroll-snap showing one item at a time */
.postcards-wrap {
  /* force full-row in a flex row layout and appear after main */
  display: block !important;
  width: 100% !important;
  max-width: 100% !important;
  margin: 1.5rem auto 0 !important;
  clear: both !important;
  order: 99;               /* in case parent is flex, keep it after main content */
  align-self: stretch;
}

/* postcards: default shows only one card; expands on hover / focus-within */
.postcards-wrap {
  display: block !important;
  width: 100%;
  max-width: 100%;
  margin: 0.75rem auto 0;
  clear: both;
  align-self: stretch;
}

/* show only one postcard by default (compact preview) */
.postcards-container {
  max-height: 1px;              /* shrink then let card itself provide visible height via clip */
  overflow: hidden;
  transition: max-height 320ms cubic-bezier(.2,.9,.3,1), opacity 200ms;
  scroll-snap-type: y mandatory;
  -webkit-overflow-scrolling: touch;
  box-sizing: border-box;
  padding: 0;                   /* layout controlled inside postcards */
}

/* reveal a single card preview using the first .postcard's content height */
.postcards-container > .postcard:first-child {
  padding-top: 0.75rem;
  padding-bottom: 0.75rem;
}

/* set iframe compact size (phone-friendly) */
.postcard iframe {
  width: 100%;
  max-width: 720px;
  height: 180px;               /* compact preview height */
  border-radius: 8px;
  background: #000;
  display: block;
  margin: 0 auto;
}

/* expand to full gallery on hover/focus-within */
.postcards-wrap:hover .postcards-container,
.postcards-wrap:focus-within .postcards-container {
  max-height: 56vh;            /* allow scrolling to next cards */
  overflow-y: auto;
  padding: 0.5rem 0.5rem 1rem;
}

/* when expanded, slightly larger iframes */
.postcards-wrap:hover .postcard iframe,
.postcards-wrap:focus-within .postcard iframe {
  height: calc(min(40vh, 320px));
}

/* stack cards vertically */
.postcards-container .postcard {
  scroll-snap-align: start;
  display: block;
  width: 100%;
  padding: 0.5rem 0;
  box-sizing: border-box;
}

/* subtle gradient hint when collapsed */
.postcards-container {
  position: relative;
}
.postcards-container::after {
  content: '';
  position: absolute;
  left: 0; right: 0; bottom: 0;
  height: 36px;
  pointer-events: none;
  background: linear-gradient(180deg, rgba(7,16,33,0) 0%, rgba(7,16,33,0.92) 90%);
  opacity: 0.7;
  transition: opacity 200ms;
}
.postcards-wrap:hover .postcards-container::after,
.postcards-wrap:focus-within .postcards-container::after { opacity: 0; }

/* Postcards carousel: compact preview -> player on hover/tap; single visible video + overlapped next preview */
.postcards-wrap { align-self: center; }

.pc-root { width:100%; max-width:960px; margin:0 auto; }

/* preview button rectangle */
.pc-preview { display:block; background:#000; cursor:pointer; }
.pc-preview img { display:block; }

/* player area */
.pc-player { position:relative; }

/* iframe sizing responsive and compact (phone-first) */
.pc-frame-wrap iframe { width:100%; height:180px; border-radius:8px; display:block; }
@media(min-width:640px){ .pc-frame-wrap iframe{ height:260px; } }
@media(min-width:1024px){ .pc-frame-wrap iframe{ height:360px; } }

/* next preview: slightly overlapping bottom of player, low opacity */
.pc-next { margin-top:-44px; display:flex; justify-content:center; pointer-events:none; }
.pc-next img { opacity:0.48; transform:translateY(8px); border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,0.4); }

/* collapsed state: preview shown, player hidden (controlled by JS) */

/* focus/hover affordance: when preview active (keyboard) show hover state */
.pc-preview:focus { outline:2px solid rgba(192,132,252,0.6); }

/* small animation */
.pc-frame-wrap, .pc-next img, .pc-preview img { transition: transform .28s cubic-bezier(.2,.9,.3,1), opacity .22s; }

/* reduced motion */
@media (prefers-reduced-motion: reduce) {
  .pc-frame-wrap, .pc-next img, .pc-preview img { transition: none !important; }
}

/* postcards: ensure header visible, small preview on phones, animated transitions */
#postcards-carousel h2.sr-only {
  /* reveal the postcards header without changing its text */
  position: static !important;
  width: auto !important;
  height: auto !important;
  margin: 0 0 0.5rem 0;
  clip: auto !important;
  clip-path: none !important;
  overflow: visible !important;
  white-space: normal !important;
  opacity: 1;
  color: #ffffff;            /* changed to white */
  font-weight: 600;
  text-align: center;
}

/* center gallery and keep it narrow for phones */
.postcards-wrap {
  display: block !important;
  width: 100%;
  max-width: 640px;
  margin: 0.75rem auto 0;
  clear: both;
  align-self: center;
}

/* preview rectangle smaller for phones */
.pc-preview img {
  display:block;
  width:100%;
  height:110px;            /* compact mobile preview */
  object-fit:cover;
  transition: transform .24s cubic-bezier(.2,.9,.3,1);
}
@media(min-width:640px) {
  .postcards-wrap { max-width: 820px; }
  .pc-preview img { height:150px; }
}
@media(min-width:1024px) {
  .postcards-wrap { max-width: 960px; }
  .pc-preview img { height:200px; }
}

/* player sizing (keeps small) */
.pc-frame-wrap iframe {
  width:100%;
  height:180px;
  border-radius:8px;
  display:block;
}
@media(min-width:640px){ .pc-frame-wrap iframe{ height:240px; } }
@media(min-width:1024px){ .pc-frame-wrap iframe{ height:320px; } }

/* next preview overlap */
.pc-next { margin-top:-26px; display:flex; justify-content:center; pointer-events:none; }
.pc-next img { opacity:0.5; transform: translateY(6px); border-radius:8px; box-shadow:0 8px 20px rgba(0,0,0,0.36); width:92%; max-width:420px; }

/* remove transparency animation â€” preview simply hides when player active; player fades in without opacity trick */
#postcards-carousel.pc-active .pc-preview img { transform: scale(0.995) translateY(-4px); }
#postcards-carousel.pc-active .pc-player { pointer-events:auto; }

/* dragging motion blur */
#postcards-carousel.dragging .pc-frame-wrap iframe {
  filter: blur(4px) saturate(0.98);
  transition: filter 120ms linear;
}

/* slider styles (small, subtle) */
.pc-slider input[type="range"] {
  -webkit-appearance: none;
  appearance: none;
  height: 6px;
  background: rgba(255,255,255,0.08);
  border-radius: 999px;
  outline: none;
}
.pc-slider input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background: #c084fc;
  box-shadow: 0 2px 6px rgba(0,0,0,0.45);
  cursor: pointer;
  transition: transform .12s;
}
.pc-slider input[type="range"]:active::-webkit-slider-thumb { transform: scale(1.06); }

/* ensure the gallery doesn't cover your main header */
main, .back-btn { position: relative; z-index: 2; }
/* reduced motion */
@media (prefers-reduced-motion: reduce) {
  .pc-preview img, .pc-frame-wrap iframe { transition: none !important; filter: none !important; }
}
